#pragma once
#include <string>
#include <fstream>

#include "network_info.h"
#include "log.h"


class LoadFromFiles
{
public:
    static NetworkInfo loadNetworkInfo();
};

struct NetworkInfo
{
    NetworkInfo()
    {
        serverIp = "";
        myIp = "";
        joinServerPort = 0;
        receivePort = 0;
        sendPort = 0; 
    }
    ~NetworkInfo() {}
    
    std::string serverIp, myIp;
    int joinServerPort, receivePort, sendPort; 
};


NetworkInfo LoadFromFiles::loadNetworkInfo()
{
	std::fstream fs ("network_info.txt", std::fstream::in);
    NetworkInfo ni;

    if (fs.is_open())
	{
		//LOG("Server info file opened correctly");
        
        std::string input;

		fs >> input >> ni.serverIp;
		fs >> input >> ni.myIp;
		fs >> input >> ni.joinServerPort;		
		fs >> input >> ni.receivePort;		
		fs >> input >> ni.sendPort;		
	}
	else
		throw "Server info file cannot be opened!";

	//LOG("Check");
	fs.close();
    return ni;
}

